{"version":3,"sources":["webpack:///./src/components/icons/IconEdit.vue","webpack:///./src/views/BookDetail.vue","webpack:///./src/views/BookDetail.vue?6b41","webpack:///./src/components/icons/IconArrowLeft.vue","webpack:///./src/utils/alertConstructHandle.js"],"names":["__exports__","route","useRoute","router","useRouter","axios","inject","Swal","book","ref","getBook","url","params","bookId","get","then","res","value","data","catch","err","console","log","onMounted","isEdit","tempBook","editBook","id","title","author","description","patch","fire","successAlertConstruct","errorAlertConstruct","response","message","openEdit","JSON","parse","stringify","closeEdit","text","position","icon","showConfirmButton","timer","module","exports"],"mappings":"6uBAGA,MAAMA,EAAc,EAEL,Q,u2BCgFf,MAAMC,EAAQC,iBACRC,EAASC,iBACTC,EAAQC,eAAO,SACfC,EAAOD,eAAO,SAEdE,EAAOC,eAAI,IACXC,EAAU,KACd,MAAMC,EAAO,+CAAmCV,EAAMW,OAAOC,OAC7DR,EACGS,IAAIH,GACJI,KAAMC,IACLR,EAAKS,MAAQD,EAAIE,OAElBC,MAAOC,IACNC,QAAQC,IAAIF,MAIlBG,eAAU,KACRb,MAIF,MAAMc,EAASf,gBAAI,GACbgB,EAAWhB,eAAI,IACfiB,EAAYC,IAChB,MAAM,MAAEC,EAAF,OAASC,EAAT,YAAiBC,GAAgBL,EAASR,MAC1CC,EAAO,CACXU,QAAOC,SAAQC,eAEXnB,EAAO,+CAAmCgB,EAChDtB,EACG0B,MAAMpB,EAAKO,GACXH,KAAMC,IACLR,EAAKS,MAAQD,EAAIE,KACjBM,EAAOP,OAAQ,EACfV,EAAKyB,KAAKC,mCAAsB,KAAM,aAEvCd,MAAOC,IACNb,EAAKyB,KAAKE,iCAAoB,KAAMd,EAAIe,SAASjB,KAAKkB,aAKtDC,EAAW,KACfZ,EAASR,MAAQqB,KAAKC,MAAMD,KAAKE,UAAUhC,EAAKS,QAChDO,EAAOP,OAAQ,GAIXwB,EAAY,KAChBjB,EAAOP,OAAQ,G,2+DCrIjB,MAAM,EAAc,EAEL,gB,+bCFf,MAAMjB,EAAc,EAEL,U,mBCLf,MAAMkC,EAAsB,CAACN,EAAOc,EAAO,MAAf,CAC1BC,SAAU,SACVC,KAAM,QACNhB,QACAc,OACAG,mBAAmB,EACnBC,MAAO,OAGHb,EAAwB,CAACL,EAAOc,EAAO,MAAf,CAC5BC,SAAU,SACVC,KAAM,UACNhB,QACAc,OACAG,mBAAmB,EACnBC,MAAO,OAGTC,EAAOC,QAAU,CACfd,sBACAD","file":"js/chunk-8949c760.625cba40.js","sourcesContent":["import script from \"./IconEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./IconEdit.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"flex justify-between items-center bg-white text-center py-5 px-3 mb-5\">\n    <IconArrowLeft class=\"cursor-pointer\" @click=\"router.push('/books')\" />\n    <h1 class=\"text-lg md:text-3xl font-bold\">{{ book.title }}</h1>\n    <IconEdit class=\"cursor-pointer\" @click=\"openEdit\" />\n  </div>\n  <div v-show=\"!isEdit\">\n    <h2 class=\"bg-white p-4 mb-4\">書名：{{ book.title }}</h2>\n    <h3 class=\"bg-white p-4 mb-4\">作者：{{ book.author }}</h3>\n    <p class=\"bg-white p-4\">備註：{{ book.description }}</p>\n  </div>\n  <Form v-show=\"isEdit\" ref=\"form\" class=\"\" v-slot=\"{ errors }\" @submit=\"editBook(book.id)\">\n    <div class=\"mb-3\">\n      <label for=\"title\" class=\"inline-block mb-1\"\n        >書名\n        <span class=\"text-red-600 mr-2\">*</span>\n      </label>\n      <Field\n        id=\"title\"\n        name=\"書名\"\n        type=\"text\"\n        class=\"w-full p-2\"\n        :class=\"{ 'is-invalid': errors['書名'] }\"\n        placeholder=\"請輸入書名\"\n        v-model=\"tempBook.title\"\n        rules=\"required\"\n      />\n      <ErrorMessage name=\"書名\" class=\"mt-1 block text-red-600\" />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"author\" class=\"inline-block mb-1\"\n        >作者 <span class=\"text-red-600 mr-2\">*</span>\n      </label>\n      <Field\n        id=\"author\"\n        name=\"作者\"\n        type=\"text\"\n        class=\"w-full p-2\"\n        :class=\"{ 'is-invalid': errors['作者'] }\"\n        placeholder=\"請輸入作者\"\n        v-model=\"tempBook.author\"\n        rules=\"required\"\n      />\n      <ErrorMessage name=\"作者\" class=\"mt-1 block text-red-600\" />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"description\" class=\"inline-block mb-1\">備註 </label>\n      <textarea\n        name=\"備註\"\n        id=\"description\"\n        rows=\"8\"\n        class=\"w-full p-2\"\n        v-model=\"tempBook.description\"\n      >\n      </textarea>\n    </div>\n    <div class=\"flex gap-5\">\n      <button\n        class=\"bg-transparent w-1/2 hover:bg-blue-500 text-blue-700 font-semibold\n         hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded-full\"\n        @click.prevent=\"closeEdit\"\n      >\n        取消\n      </button>\n      <button\n        type=\"submit\"\n        class=\"w-1/2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2\n         px-10 rounded-full\"\n      >\n        修改\n      </button>\n    </div>\n  </Form>\n</template>\n\n<script setup>\nimport { inject, onMounted, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport IconArrowLeft from '@/components/icons/IconArrowLeft.vue';\nimport IconEdit from '@/components/icons/IconEdit.vue';\nimport {\n  errorAlertConstruct,\n  successAlertConstruct,\n} from '@/utils/alertConstructHandle';\n\nconst route = useRoute();\nconst router = useRouter();\nconst axios = inject('axios');\nconst Swal = inject('$swal');\n\nconst book = ref({});\nconst getBook = () => {\n  const url = `${process.env.VUE_APP_API}/books/${route.params.bookId}`;\n  axios\n    .get(url)\n    .then((res) => {\n      book.value = res.data;\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n};\n\nonMounted(() => {\n  getBook();\n});\n\n// 編輯書籍\nconst isEdit = ref(false);\nconst tempBook = ref({});\nconst editBook = (id) => {\n  const { title, author, description } = tempBook.value;\n  const data = {\n    title, author, description,\n  };\n  const url = `${process.env.VUE_APP_API}/books/${id}`;\n  axios\n    .patch(url, data)\n    .then((res) => {\n      book.value = res.data;\n      isEdit.value = false;\n      Swal.fire(successAlertConstruct('成功', '編輯書籍成功'));\n    })\n    .catch((err) => {\n      Swal.fire(errorAlertConstruct('失敗', err.response.data.message));\n    });\n};\n\n// 開啟編輯\nconst openEdit = () => {\n  tempBook.value = JSON.parse(JSON.stringify(book.value));\n  isEdit.value = true;\n};\n\n// 關閉編輯\nconst closeEdit = () => {\n  isEdit.value = false;\n};\n</script>\n","import script from \"./BookDetail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BookDetail.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./IconArrowLeft.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./IconArrowLeft.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","const errorAlertConstruct = (title, text = '') => ({\n  position: 'center',\n  icon: 'error',\n  title,\n  text,\n  showConfirmButton: false,\n  timer: 1500,\n});\n\nconst successAlertConstruct = (title, text = '') => ({\n  position: 'center',\n  icon: 'success',\n  title,\n  text,\n  showConfirmButton: false,\n  timer: 1500,\n});\n\nmodule.exports = {\n  errorAlertConstruct,\n  successAlertConstruct,\n};\n"],"sourceRoot":""}